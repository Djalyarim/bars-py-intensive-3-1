MVCC.
1) Что произойдет со строками, если выполняется ROLLBACK транзакции ? <br>
Q) ROLLBACK откатывает текущую транзакцию и приводит к аннулированию всех изменений, произведённых транзакцией.

2) Выполнить sql запросы в двух процессах для таблицы workers:

| Процесс №1                                                                       | Процесс №2                                                                                        |
|----------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
| begin;                                                                           |                                                                                                   |
| вставить две новых записи (name=Петр)                                            |                                                                                                   |
| для всех только что созданных  записей к значению поля name добавить значение id<br/> |                                                                                                   |
| отобразить все версии строк с которыми работали в текущей транзакции
|  <pre>ctid   state    xmin     xmax    t_ctid  </pre> (0,13)  normal  516      516      (0,15) <br> (0,14)  normal  516      516      (0,16) <br> (0,15)  normal  516      0 (a)    (0,15)<br> (0,16)  normal  516      0 (a)    (0,16)                                                                             |    получить все строки таблицы. почему не видно изменений? <br> Q) Транзакция процесса 1 не закомичена                                         |
| commit;                                                                      |                                                                                                       |
|                                                                              |                                                                                                   |
|begin;                                                                            | begin                                                                                             |
|для всех записей изменить значение поля name чтобы оно было в кавычках.                                                                                | для всех записей изменить значение поля name чтобы оно было в кавычках. <br/>Что произошло и почему? <br> Q) Транзакция в процессе 2 ожидает завершения транзакции в процессе 1, как только транзакция в процессе 1 будет закомичена, команда выполнится.|
|commit;                                                                                | commit;<br/>получить все версии строк таблицы workers                                             |


Блокировки
1) В двух транзакциях добиться блокировки строки при попытке обновления одной и той же записи.
И с помощью представления pg_lock получить информацию о получившейся блокировке. <br>
Q) Вторая транзакция в состоянии Sharelock и будет там висеть пока первая транзакция не применит комит (снимет ExlusiveLock) <br>
<pre>
pid   usename      blocked_by             blocked_query
342   intensive    {331}                  UPDATE workers SET name = '"Коля"';
</pre>